<html>

<head>
	<title>My first three.js app</title>
	<style>
		body {
			margin: 0;
		}

		canvas {
			width: 100%;
			height: 100%
		}
	</style>
	<script src="https://threejs.org/build/three.min.js"></script>
	<script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
	<script src="https://threejs.org/examples/js/loaders/GLTFLoader.js"></script>
</head>

<body>
	<script>

		var renderer = new THREE.WebGLRenderer();
		renderer.setSize(window.innerWidth, window.innerHeight);
		document.body.appendChild(renderer.domElement);

		var scene = new THREE.Scene();
		scene.background = new THREE.Color(0x505050);

		var camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.01, 100);

		var controls = new THREE.OrbitControls(camera, renderer.domElement);
		
		var light = new THREE.AmbientLight(0xffffff);
		scene.add(light);

		var geometry = new THREE.BoxGeometry(8, 6, 6);

		var loader = new THREE.TextureLoader();

		var textureWS = loader.load('pic/wallpaper.jpg');
		textureWS.wrapS = THREE.RepeatWrapping;
		textureWS.wrapT = THREE.RepeatWrapping;
		textureWS.repeat.set(12, 12);
		
		var textureWL = loader.load('pic/wallpaper.jpg');
		textureWL.wrapS = THREE.RepeatWrapping;
		textureWL.wrapT = THREE.RepeatWrapping;
		textureWL.repeat.set(16, 12);

		var textureF = loader.load('pic/floor.jpg');
		textureF.wrapS = THREE.RepeatWrapping;
		textureF.wrapT = THREE.RepeatWrapping;
		textureF.repeat.set(3, 2);

		var textureC = loader.load('pic/ceiling.jpg');
		textureC.wrapS = THREE.RepeatWrapping;
		textureC.wrapT = THREE.RepeatWrapping;
		textureC.repeat.set(3, 2);

		var materials = [
			new THREE.MeshBasicMaterial({map: textureWS, side: THREE.BackSide}),
			new THREE.MeshBasicMaterial({map: textureWL, side: THREE.BackSide}),
			new THREE.MeshBasicMaterial({map: textureC, side: THREE.BackSide}),
			new THREE.MeshBasicMaterial({map: textureF, side: THREE.BackSide}),
			new THREE.MeshBasicMaterial({map: textureWS, side: THREE.BackSide}),
			new THREE.MeshBasicMaterial({map: textureWL, side: THREE.BackSide}),
		];

		var room = new THREE.Mesh(geometry, materials);
		room.position.y = 3;
		scene.add(room);
		
		var loader = new THREE.GLTFLoader();
		
		// sofa
		loader.load('mod/sofa.glb', function (gltf) {
			sofa = gltf.scene;
			sofa.scale.set(0.04, 0.04, 0.04);
			sofa.position.set(-2, 0, -3)
			sofa.rotation.y = - Math.PI / 2;
			scene.add(sofa);
		},
			function (xhr) { console.log((xhr.loaded / xhr.total * 100) + '% loaded'); },
			function (error) { console.log('An error happened'); }
		);
		
		// table
		loader.load('mod/table.glb', function (gltf) {
			table = gltf.scene;
			table.scale.set(0.03, 0.03, 0.03);
			table.position.set(2.5, 0, 2.5)
			table.rotation.y = - Math.PI ;
			scene.add(table);
		},
			function (xhr) { console.log((xhr.loaded / xhr.total * 100) + '% loaded'); },
			function (error) { console.log('An error happened'); }
		);
		
		
		
		
		

		var loader = new THREE.TextureLoader();
		
		var doorGeometry = new THREE.PlaneGeometry(2.6, 1);
		var doorMaterial = new THREE.MeshLambertMaterial({ map: loader.load('pic/door.jpg'), side: THREE.DoubleSide });
		var door = new THREE.Mesh(doorGeometry, doorMaterial);
		myWindow.rotation.z = -0.5 * Math.PI;
		myWindow.rotation.y = -0.5 * Math.PI;
		door.position.set(1, 1, 0);
		scene.add(door);
		
		var myWindowGeometry = new THREE.PlaneGeometry(0.98, 0.82);
		var myWindowMaterial = new THREE.MeshLambertMaterial({ map: loader.load('pic/window.jpg'), side: THREE.DoubleSide });
		var myWindow = new THREE.Mesh(myWindowGeometry, myWindowMaterial);
		myWindow.rotation.y = -0.5 * Math.PI;
		myWindow.position.set(3.99, 1, 1);
		scene.add(myWindow);

		

		
		// room.add(pic);


		//controls.update() must be called after any manual changes to the camera's transform
		camera.position.set(0, 7, 7);
		controls.update();

		function animate() {

			requestAnimationFrame(animate);

			// required if controls.enableDamping or controls.autoRotate are set to true
			controls.update();

			renderer.render(scene, camera);
		}
		animate();

	</script>
</body>

</html>
